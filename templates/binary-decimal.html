<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="CONTENT-TYPE" content="text/html; charset=UTF-8" />
    <title>Binary Translator</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
    <link rel="icon" type="image/png" href="static/img/binary.favicon.png" />
  </head>
  <body>
    <header class="header">
      <div class="logo">
        <a>Binary Translator</a>
      </div>
      <nav class="navigation">
        <ul>
          <li>
            <a
              href="/"
              class="{% if request.endpoint == 'index' %}active{% endif %}"
              >Decimal or Word to Binary</a
            >
          </li>
          <li>
            <a
              href="/binary-decimal"
              class="{% if request.endpoint == 'binary-decimal' %}active{% endif %}"
              >Binary to Decimal or Word</a
            >
          </li>
          <li>
            <a
              href="/about"
              class="{% if request.endpoint == 'about' %}active{% endif %}"
              >About us</a
            >
          </li>
          <li>
            <a
              href="/donate"
              class="{% if request.endpoint == 'donate' %}active{% endif %}"
              >Donate</a
            >
          </li>
        </ul>
      </nav>
      <!-- Burger -->
      <div class="burger">
        <span></span>
      </div>
    </header>

    <div class="all">
      <form class="all_form" id="all_form">
        <p class="Write">
          Write your binary code that you would like to translate
        </p>
        <input
          class="input_index"
          type="text"
          id="binaryInput"
          name="binary"
          placeholder="Write your code.."
          required
        />
        <button type="submit" id="sendButton">Convert</button>
      </form>

      <form class="answer_form" id="answer_form">
        <p class="Answer">Your answer:</p>
        <div id="response"></div>
      </form>
    </div>
    <!--- <script src="{{ url_for('static', filename='js/script.js') }}"></script> --->
    <script>
      const form = document.getElementById("all_form");
      const resultDiv = document.getElementById("response"); // Оновлено, щоб використовувати id="response" для виведення результату

      form.addEventListener("submit", async (event) => {
        event.preventDefault(); // Запобігаємо стандартній відправці форми
        const binaryInput = document.getElementById("binaryInput").value;

        const response = await fetch("/convert-binary", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ binary: binaryInput }),
        });

        const data = await response.json();

        if (response.ok) {
          // Вивести відповідь в елемент "response"
          resultDiv.textContent = data.message; // Оновлено для використання 'message'
        } else {
          // Якщо є помилка, вивести повідомлення про помилку
          resultDiv.textContent = data.error;
        }
      });

      if (img_santa) {
        img_santa.addEventListener("click", function () {
          window.location.href = "https://letter-to-santa-95663.web.app/";
        });
      }
      if (img_binary) {
        img_binary.addEventListener("click", function () {
          window.location.href = "https://letter-to-santa-95663.web.app/";
        });
      }
    </script>
  </body>
</html>
